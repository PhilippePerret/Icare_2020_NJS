script(src="/assets/js/jquery-main.js")  
script(src="/assets/js/fronttests.js")
button(onclick="runTests()") Lancer les tests
button(onclick="runCode()") Jouer le code ci-dessous
style(type="text/css").
  #codetest{width:100%;height:150px;resize:none;}
  #console {
    width:100%;
    background-color:black; color:white;
    position:relative;
    height: 380px;
  }
  #console #console-messages {
    padding:1em;
    max-height: 300px;
    height: 300px;
    overflow:auto;
    /* border:1px solid red; */
  }
  #console .warning, #console .failure {color:#E90000;}
  #console .notice,  #console .success {color:#00DD00;} //vert
  #console .blue {color:#127AFF;}
  #console .mini {font-size:0.85em;}
  #console .discret {font-size:0.85em;opacity:0.5;}

  #console #console-footer {
    position:absolute;
    bottom: 0;
    height:18px;
    font-size: 14px;
    width: 80%;
    padding: 4px 10%;
    text-align:right;
    /* background-color:#555555; */
  }
  #console #console-footer > span > span {
    margin: 0 4px;
  }
  #console #console-footer > span.success {color:#00DD00;}
  #console #console-footer > span.failure {color:#E90000;}

  input#test-filename {
    width: 60%;
  }
  
div
  textarea(id="codetest")
    | async function TheTest(){
    |   await url("/")
    |   await wait(1000)
    //- |   await url("/signup", 'input[name="_upseudo_"]')
    |   await url("/signup", 'input[name="_upseudo_"]')
    |   var form = new Form('#new-user-form')
    |   form.fillWith({
    |       '_upseudo_': 'Phil'
    |     , '_umail_':   'phil@atelier-icare.net'
    |     , '_upassword_': 'mon mot de passe'
    |     , '_upassword_confirmation_': 'autre mot de passe'
    |   })
    |   form.submit()
    | }
    | TheTest();
div
  input(type="text",id="test-filename",placeholder="path/to/file/from/tests", 
    value="user/signup.test.js")
  button(type="button",onclick="RunTestFile()") Jouer ce(s) test(s)
div#console
  div#console-messages
  div#console-footer
    span.success
      span Success:
      span#success-mark 0
    span.failure
      span Failures:
      span#failure-mark 0
